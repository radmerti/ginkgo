function hideContent(a){"use strict";var b=0;$(".content").children("div").each(function(){var c,d=$(this);d.hasClass("enter")?(c=$(".enter-child",d),c.length>0?(b+=c.length,d.on("animationend webkitAnimationEnd",function(){$(this).hasClass(".enter-child")&&$(this).hasClass("exit")&&($(this).hide(),b-=1,0===b&&a())}),c.each(function(){$(this).removeClass("enter"),$(this).addClass("exit")})):(b+=1,d.on("animationend webkitAnimationEnd",function(c){c.target===this&&$(this).hasClass("exit")&&($(this).hide(),b-=1,0===b&&a())}),d.removeClass("enter"),d.addClass("exit"))):d.hide()}),0===b&&a()}function loadArticle(a,b){"use strict";var c="/articles/"+a+".html";$.get(c,function(c){var d,e,f=$(".content #article-container");f.html(c),$("pre code",f).each(function(a,b){hljs.highlightBlock(b)}),d=$("img",f),d.length>0?(e=0,d.load(function(){e++===d.length-1&&(f.show(),f.removeClass("exit"),f.addClass("enter"),b||window.history.pushState({article:a},a,"/"+a))})):(f.show(),f.removeClass("exit"),f.addClass("enter"),b||window.history.pushState({article:a},a,"/"+a))})}function loadArticleGrid(a){"use strict";$.get("/g",function(b){var c,d,e=$(".content #article-grid-container");e.html(b),c=$("img",e),d=0,c.load(function(){d++===c.length-1&&(e.show(),$(".article-list-entry",e).removeClass("exit"),$(".article-list-entry",e).addClass("enter"),a||window.history.pushState(void 0,"Ginkgo Home","/"))}),$(".article-list-entry.clickable",e).click(function(){var a=$(this);hideContent(function(){loadArticle(a.data("content"),!1)},a)})})}function loadPageContent(a){"use strict";$(".content").children("div").removeClass("exit");var b=window.location.pathname.split("/")[1];""!==b?hideContent(function(){loadArticle(b,a)},void 0):hideContent(function(){loadArticleGrid(a)},void 0)}window.onpopstate=function(){"use strict";loadPageContent(function(){return!0},!0)},$(document).ready(function(){"use strict";$("#new-article-click .hidden-input").change(function(){var a,b,c=$(".content #article-container");this.files&&(a=this.files[0]),b=new FileReader,b.onload=function(a){marked(a.target.result,function(a,b){var d,e,f,g,h,i;c.html(b),d=$(".header h1",c).text(),e=$(".header h2",c).text(),f=$(c).html().replace(/(\r\n|\n|\r)/gm," ").replace(/\s+/g," "),g={authors:0,title:d,subtitle:e,content:f,topics:0},$("pre code",c).each(function(a,b){hljs.highlightBlock(b)}),c.show(),c.removeClass("exit"),c.addClass("enter"),h=$("#upload-artice-click"),h.fadeIn("slow"),i=$(b)})},c.hasClass("enter")&&(c.removeClass("enter"),c.addClass("exit")),b.readAsText(a)})}),$(window).load(function(){"use strict";$("body").addClass("enter"),$("body").on("animationend webkitAnimationEnd",function(a){a.target===this&&$(this).hasClass("enter")&&loadPageContent(!0)});var a=window.location.pathname.split("/")[1];""!==a&&(window.history.replaceState(void 0,"Ginkgo Home","/"),window.history.pushState(void 0,"",a))});