(function(){function u(a){this.c=[];this.c.links={};this.options=a||l.j;this.rules=f.u;this.options.g&&(this.rules=this.options.S?f.S:f.g)}function r(a,b){this.options=b||l.j;this.links=a;this.rules=h.u;this.a=this.options.a||new m;this.a.options=this.options;if(!this.links)throw Error("Tokens array requires a `links` property.");this.options.g?this.rules=this.options.K?h.K:h.g:this.options.v&&(this.rules=h.v)}function m(a){this.options=a||{}}function q(a){this.c=[];this.b=null;this.options=a||l.j;
this.options.a=this.options.a||new m;this.a=this.options.a;this.a.options=this.options}function n(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function w(a){return a.replace(/&([#\w]+);/g,function(a,e){e=e.toLowerCase();return"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function p(a,b){a=a.source;b=b||"";return function c(f,
d){if(!f)return new RegExp(a,b);d=d.source||d;d=d.replace(/(^|[^\[])\^/g,"$1");a=a.replace(f,d);return c}}function v(){}function t(a){for(var b=1,e,c;b<arguments.length;b++)for(c in e=arguments[b],e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c]);return a}function l(a,b,e){if(e||"function"===typeof b){e||(e=b,b=null);b=t({},l.j,b||{});var c=b.o,f,d,h=0;try{f=u.B(a,b)}catch(k){return e(k)}d=f.length;var g=function(a){if(a)return b.o=c,e(a);var d;try{d=q.parse(f,b)}catch(g){a=g}b.o=c;return a?
e(a):e(null,d)};if(!c||3>c.length)return g();delete b.o;if(!d)return g();for(;h<f.length;h++)(function(a){return"code"!==a.type?--d||g():c(a.text,a.lang,function(b,c){if(b)return g(b);if(null==c||c===a.text)return--d||g();a.text=c;a.fa=!0;--d||g()})})(f[h])}else try{return b&&(b=t({},l.j,b)),q.parse(u.B(a,b),b)}catch(k){k.message+="\nPlease report this to https://github.com/chjj/marked.";if((b||l.j).oa)return"<p>An error occured:</p><pre>"+n(k.message+"",!0)+"</pre>";throw k;}}var f={ja:/^\n+/,code:/^( {4}[^\n]+\n*)+/,
M:v,I:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,Y:v,W:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,l:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,A:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,F:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:v,h:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,L:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};
f.item=p(f.item,"gm")(/bull/g,f.L)();f.list=p(f.list)(/bull/g,f.L)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+f.F.source+")")();f.l=p(f.l)("def",f.F)();f.V="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";f.A=p(f.A)("comment",/\x3c!--[\s\S]*?--\x3e/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,f.V)();f.h=p(f.h)("hr",f.I)("heading",
f.heading)("lheading",f.W)("blockquote",f.l)("tag","<"+f.V)("def",f.F)();f.u=t({},f);f.g=t({},f.u,{M:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,h:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});f.g.h=p(f.h)("(?!","(?!"+f.g.M.source.replace("\\1","\\2")+"|"+f.list.source.replace("\\1","\\3")+"|")();f.S=t({},f.g,{Y:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});u.rules=f;u.B=function(a,b){return(new u(b)).B(a)};
u.prototype.B=function(a){a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.b(a,!0)};u.prototype.b=function(a,b,e){a=a.replace(/^ +$/gm,"");for(var c,h,d,m,g,k,l;a;){if(d=this.rules.ja.exec(a))a=a.substring(d[0].length),1<d[0].length&&this.c.push({type:"space"});if(d=this.rules.code.exec(a))a=a.substring(d[0].length),d=d[0].replace(/^ {4}/gm,""),this.c.push({type:"code",text:this.options.v?d:d.replace(/\n+$/,"")});else if(d=this.rules.M.exec(a))a=
a.substring(d[0].length),this.c.push({type:"code",lang:d[2],text:d[3]||""});else if(d=this.rules.heading.exec(a))a=a.substring(d[0].length),this.c.push({type:"heading",depth:d[1].length,text:d[2]});else if(b&&(d=this.rules.Y.exec(a))){a=a.substring(d[0].length);g={type:"table",m:d[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:d[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:d[3].replace(/\n$/,"").split("\n")};for(k=0;k<g.align.length;k++)g.align[k]=/^ *-+: *$/.test(g.align[k])?"right":/^ *:-+: *$/.test(g.align[k])?
"center":/^ *:-+ *$/.test(g.align[k])?"left":null;for(k=0;k<g.cells.length;k++)g.cells[k]=g.cells[k].split(/ *\| */);this.c.push(g)}else if(d=this.rules.W.exec(a))a=a.substring(d[0].length),this.c.push({type:"heading",depth:"="===d[2]?1:2,text:d[1]});else if(d=this.rules.I.exec(a))a=a.substring(d[0].length),this.c.push({type:"hr"});else if(d=this.rules.l.exec(a))a=a.substring(d[0].length),this.c.push({type:"blockquote_start"}),d=d[0].replace(/^ *> ?/gm,""),this.b(d,b,!0),this.c.push({type:"blockquote_end"});
else if(d=this.rules.list.exec(a)){a=a.substring(d[0].length);m=d[2];this.c.push({type:"list_start",la:1<m.length});d=d[0].match(this.rules.item);c=!1;l=d.length;for(k=0;k<l;k++)g=d[k],h=g.length,g=g.replace(/^ *([*+-]|\d+\.) +/,""),~g.indexOf("\n ")&&(h-=g.length,g=this.options.v?g.replace(/^ {1,4}/gm,""):g.replace(new RegExp("^ {1,"+h+"}","gm"),"")),this.options.pa&&k!==l-1&&(h=f.L.exec(d[k+1])[0],m===h||1<m.length&&1<h.length||(a=d.slice(k+1).join("\n")+a,k=l-1)),h=c||/\n\n(?!\s*$)/.test(g),k!==
l-1&&(c="\n"===g.charAt(g.length-1),h||(h=c)),this.c.push({type:h?"loose_item_start":"list_item_start"}),this.b(g,!1,e),this.c.push({type:"list_item_end"});this.c.push({type:"list_end"})}else if(d=this.rules.A.exec(a))a=a.substring(d[0].length),this.c.push({type:this.options.O?"paragraph":"html",na:!this.options.P&&("pre"===d[1]||"script"===d[1]||"style"===d[1]),text:d[0]});else if(!e&&b&&(d=this.rules.F.exec(a)))a=a.substring(d[0].length),this.c.links[d[1].toLowerCase()]={href:d[2],title:d[3]};else if(b&&
(d=this.rules.table.exec(a))){a=a.substring(d[0].length);g={type:"table",m:d[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:d[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:d[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(k=0;k<g.align.length;k++)g.align[k]=/^ *-+: *$/.test(g.align[k])?"right":/^ *:-+: *$/.test(g.align[k])?"center":/^ *:-+ *$/.test(g.align[k])?"left":null;for(k=0;k<g.cells.length;k++)g.cells[k]=g.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.c.push(g)}else if(b&&
(d=this.rules.h.exec(a)))a=a.substring(d[0].length),this.c.push({type:"paragraph",text:"\n"===d[1].charAt(d[1].length-1)?d[1].slice(0,-1):d[1]});else if(d=this.rules.text.exec(a))a=a.substring(d[0].length),this.c.push({type:"text",text:d[0]});else if(a)throw Error("Infinite loop on byte: "+a.charCodeAt(0));}return this.c};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,da:/^<([^ >]+(@|:\/)[^ >]+)>/,url:v,tag:/^\x3c!--[\s\S]*?--\x3e|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,
N:/^!?\[(inside)\]\s*\[([^\]]*)\]/,ka:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,J:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,H:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,w:/^ {2,}\n(?!\s*$)/,G:v,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,U:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,ca:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};h.link=p(h.link)("inside",h.U)("href",h.ca)();h.N=p(h.N)("inside",h.U)();h.u=t({},h);h.v=t({},h.u,{J:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
H:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});h.g=t({},h.u,{escape:p(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,G:/^~~(?=\S)([\s\S]*?\S)~~/,text:p(h.text)("]|","~]|")("|","|https?://|")()});h.K=t({},h.g,{w:p(h.w)("{2,}","*")(),text:p(h.g.text)("{2,}","*")()});r.rules=h;r.f=function(a,b,e){return(new r(b,e)).f(a)};r.prototype.f=function(a){for(var b="",e,c;a;)if(c=this.rules.escape.exec(a))a=a.substring(c[0].length),b+=c[1];else if(c=this.rules.da.exec(a))a=
a.substring(c[0].length),"@"===c[2]?(e=":"===c[1].charAt(6)?this.C(c[1].substring(7)):this.C(c[1]),c=this.C("mailto:")+e):c=e=n(c[1]),b+=this.a.link(c,null,e);else if(!this.i&&(c=this.rules.url.exec(a)))a=a.substring(c[0].length),c=e=n(c[1]),b+=this.a.link(c,null,e);else if(c=this.rules.tag.exec(a))!this.i&&/^<a /i.test(c[0])?this.i=!0:this.i&&/^<\/a>/i.test(c[0])&&(this.i=!1),a=a.substring(c[0].length),b+=this.options.O?this.options.P?this.options.P(c[0]):n(c[0]):c[0];else if(c=this.rules.link.exec(a))a=
a.substring(c[0].length),this.i=!0,b+=this.Z(c,{href:c[2],title:c[3]}),this.i=!1;else if((c=this.rules.N.exec(a))||(c=this.rules.ka.exec(a)))a=a.substring(c[0].length),e=(c[2]||c[1]).replace(/\s+/g," "),(e=this.links[e.toLowerCase()])&&e.href?(this.i=!0,b+=this.Z(c,e),this.i=!1):(b+=c[0].charAt(0),a=c[0].substring(1)+a);else if(c=this.rules.J.exec(a))a=a.substring(c[0].length),b+=this.a.J(this.f(c[2]||c[1]));else if(c=this.rules.H.exec(a))a=a.substring(c[0].length),b+=this.a.H(this.f(c[2]||c[1]));
else if(c=this.rules.code.exec(a))a=a.substring(c[0].length),b+=this.a.ea(n(c[2],!0));else if(c=this.rules.w.exec(a))a=a.substring(c[0].length),b+=this.a.w();else if(c=this.rules.G.exec(a))a=a.substring(c[0].length),b+=this.a.G(this.f(c[1]));else if(c=this.rules.text.exec(a))a=a.substring(c[0].length),b+=this.a.text(n(this.R(c[0])));else if(a)throw Error("Infinite loop on byte: "+a.charCodeAt(0));return b};r.prototype.Z=function(a,b){var e=n(b.href),c=b.title?n(b.title):null;return"!"!==a[0].charAt(0)?
this.a.link(e,c,this.f(a[1])):this.a.ha(e,c,n(a[1]))};r.prototype.R=function(a){return this.options.R?a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):a};r.prototype.C=function(a){if(!this.options.C)return a;for(var b="",e=a.length,c=0,f;c<e;c++)f=a.charCodeAt(c),.5<Math.random()&&(f="x"+f.toString(16)),b+="&#"+f+";";return b};
m.prototype.code=function(a,b,e){if(this.options.o){var c=this.options.o(a,b);null!=c&&c!==a&&(e=!0,a=c)}return b?'<pre><code class="'+this.options.ia+n(b,!0)+'">'+(e?a:n(a,!0))+"\n</code></pre>\n":"<pre><code>"+(e?a:n(a,!0))+"\n</code></pre>"};m.prototype.l=function(a){return"<blockquote>\n"+a+"</blockquote>\n"};m.prototype.A=function(a){return a};m.prototype.heading=function(a,b,e){return"<h"+b+' id="'+this.options.ga+e.toLowerCase().replace(/[^\w]+/g,"-")+'">'+a+"</h"+b+">\n"};m.prototype.I=function(){return this.options.T?
"<hr/>\n":"<hr>\n"};m.prototype.list=function(a,b){var e=b?"ol":"ul";return"<"+e+">\n"+a+"</"+e+">\n"};m.prototype.X=function(a){return"<li>"+a+"</li>\n"};m.prototype.h=function(a){return"<p>"+a+"</p>\n"};m.prototype.table=function(a,b){return"<table>\n<thead>\n"+a+"</thead>\n<tbody>\n"+b+"</tbody>\n</table>\n"};m.prototype.ba=function(a){return"<tr>\n"+a+"</tr>\n"};m.prototype.aa=function(a,b){var e=b.m?"th":"td";return(b.align?"<"+e+' style="text-align:'+b.align+'">':"<"+e+">")+a+"</"+e+">\n"};
m.prototype.J=function(a){return"<strong>"+a+"</strong>"};m.prototype.H=function(a){return"<em>"+a+"</em>"};m.prototype.ea=function(a){return"<code>"+a+"</code>"};m.prototype.w=function(){return this.options.T?"<br/>":"<br>"};m.prototype.G=function(a){return"<del>"+a+"</del>"};m.prototype.link=function(a,b,e){if(this.options.O){try{var c=decodeURIComponent(w(a)).replace(/[^\w:]/g,"").toLowerCase()}catch(f){return""}if(0===c.indexOf("javascript:")||0===c.indexOf("vbscript:"))return""}a='<a href="'+
a+'"';b&&(a+=' title="'+b+'"');return a+(">"+e+"</a>")};m.prototype.ha=function(a,b,e){a='<img src="'+a+'" alt="'+e+'"';b&&(a+=' title="'+b+'"');return a+=this.options.T?"/>":">"};m.prototype.text=function(a){return a};q.parse=function(a,b){return(new q(b)).parse(a)};q.prototype.parse=function(a){this.s=new r(a.links,this.options);this.c=a.reverse();for(a="";this.next();)a+=this.D();return a};q.prototype.next=function(){return this.b=this.c.pop()};q.prototype.ma=function(){return this.c[this.c.length-
1]||0};q.prototype.$=function(){for(var a=this.b.text;"text"===this.ma().type;)a+="\n"+this.next().text;return this.s.f(a)};q.prototype.D=function(){switch(this.b.type){case "space":return"";case "hr":return this.a.I();case "heading":return this.a.heading(this.s.f(this.b.text),this.b.depth,this.b.text);case "code":return this.a.code(this.b.text,this.b.lang,this.b.fa);case "table":var a="",b="",e,c,f,d;f="";for(e=0;e<this.b.m.length;e++)f+=this.a.aa(this.s.f(this.b.m[e]),{m:!0,align:this.b.align[e]});
a+=this.a.ba(f);for(e=0;e<this.b.cells.length;e++){c=this.b.cells[e];f="";for(d=0;d<c.length;d++)f+=this.a.aa(this.s.f(c[d]),{m:!1,align:this.b.align[d]});b+=this.a.ba(f)}return this.a.table(a,b);case "blockquote_start":for(b="";"blockquote_end"!==this.next().type;)b+=this.D();return this.a.l(b);case "list_start":b="";for(a=this.b.la;"list_end"!==this.next().type;)b+=this.D();return this.a.list(b,a);case "list_item_start":for(b="";"list_item_end"!==this.next().type;)b+="text"===this.b.type?this.$():
this.D();return this.a.X(b);case "loose_item_start":for(b="";"list_item_end"!==this.next().type;)b+=this.D();return this.a.X(b);case "html":return b=this.b.na||this.options.v?this.b.text:this.s.f(this.b.text),this.a.A(b);case "paragraph":return this.a.h(this.s.f(this.b.text));case "text":return this.a.h(this.$())}};v.exec=v;l.options=l.za=function(a){t(l.j,a);return l};l.j={g:!0,S:!0,K:!1,v:!1,O:!1,P:null,C:!0,pa:!1,oa:!1,o:null,ia:"lang-",R:!1,ga:"",a:new m,T:!1};l.sa=q;l.ya=q.parse;l.ta=m;l.ra=
u;l.xa=u.B;l.qa=r;l.wa=r.f;l.parse=l;"undefined"!==typeof module&&"object"===typeof exports?module.va=l:"function"===typeof define&&define.ua&&define(function(){return l})}).call(function(){return this||("undefined"!==typeof window?window:global)}());